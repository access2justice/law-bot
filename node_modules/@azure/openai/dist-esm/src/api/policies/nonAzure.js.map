{"version":3,"file":"nonAzure.js","sourceRoot":"","sources":["../../../../src/api/policies/nonAzure.ts"],"names":[],"mappings":"AAAA,uCAAuC;AACvC,kCAAkC;AAYlC,MAAM,UAAU,cAAc;IAC5B,MAAM,MAAM,GAAmB;QAC7B,IAAI,EAAE,gBAAgB;QACtB,WAAW,EAAE,CAAC,OAAO,EAAE,IAAI,EAAE,EAAE;YAC7B,MAAM,GAAG,GAAG,IAAI,GAAG,CAAC,OAAO,CAAC,GAAG,CAAC,CAAC;YACjC,MAAM,KAAK,GAAG,GAAG,CAAC,QAAQ,CAAC,KAAK,CAAC,GAAG,CAAC,CAAC;YACtC,QAAQ,KAAK,CAAC,KAAK,CAAC,MAAM,GAAG,CAAC,CAAC,EAAE,CAAC;gBAChC,KAAK,aAAa;oBAChB,IAAI,KAAK,CAAC,KAAK,CAAC,MAAM,GAAG,CAAC,CAAC,KAAK,MAAM,EAAE,CAAC;wBACvC,GAAG,CAAC,QAAQ,GAAG,GAAG,KAAK,CAAC,CAAC,CAAC,mBAAmB,CAAC;oBAChD,CAAC;yBAAM,CAAC;wBACN,GAAG,CAAC,QAAQ,GAAG,GAAG,KAAK,CAAC,CAAC,CAAC,cAAc,CAAC;oBAC3C,CAAC;oBACD,MAAM;gBACR,KAAK,YAAY;oBACf,GAAG,CAAC,QAAQ,GAAG,GAAG,KAAK,CAAC,CAAC,CAAC,aAAa,CAAC;oBACxC,MAAM;gBACR,KAAK,aAAa;oBAChB,IAAI,KAAK,CAAC,KAAK,CAAC,MAAM,GAAG,CAAC,CAAC,KAAK,QAAQ,EAAE,CAAC;wBACzC,GAAG,CAAC,QAAQ,GAAG,GAAG,KAAK,CAAC,CAAC,CAAC,qBAAqB,CAAC;oBAClD,CAAC;yBAAM,CAAC;wBACN,MAAM,IAAI,KAAK,CAAC,iBAAiB,CAAC,CAAC;oBACrC,CAAC;oBACD,MAAM;gBACR,KAAK,gBAAgB;oBACnB,GAAG,CAAC,QAAQ,GAAG,GAAG,KAAK,CAAC,CAAC,CAAC,uBAAuB,CAAC;oBAClD,MAAM;gBACR,KAAK,cAAc;oBACjB,GAAG,CAAC,QAAQ,GAAG,GAAG,KAAK,CAAC,CAAC,CAAC,qBAAqB,CAAC;oBAChD,MAAM;YACV,CAAC;YACD,GAAG,CAAC,YAAY,CAAC,MAAM,CAAC,aAAa,CAAC,CAAC;YACvC,OAAO,CAAC,GAAG,GAAG,GAAG,CAAC,QAAQ,EAAE,CAAC;YAC7B,OAAO,IAAI,CAAC,OAAO,CAAC,CAAC;QACvB,CAAC;KACF,CAAC;IACF,OAAO,MAAM,CAAC;AAChB,CAAC","sourcesContent":["// Copyright (c) Microsoft Corporation.\n// Licensed under the MIT license.\n\n/**\n * THIS IS AN AUTO-GENERATED FILE - DO NOT EDIT!\n *\n * Any changes you make here may be lost.\n *\n * If you need to make changes, please do so in the original source file, \\{project-root\\}/sources/custom\n */\n\nimport { PipelinePolicy } from \"@azure/core-rest-pipeline\";\n\nexport function nonAzurePolicy(): PipelinePolicy {\n  const policy: PipelinePolicy = {\n    name: \"openAiEndpoint\",\n    sendRequest: (request, next) => {\n      const obj = new URL(request.url);\n      const parts = obj.pathname.split(\"/\");\n      switch (parts[parts.length - 1]) {\n        case \"completions\":\n          if (parts[parts.length - 2] === \"chat\") {\n            obj.pathname = `${parts[1]}/chat/completions`;\n          } else {\n            obj.pathname = `${parts[1]}/completions`;\n          }\n          break;\n        case \"embeddings\":\n          obj.pathname = `${parts[1]}/embeddings`;\n          break;\n        case \"generations\":\n          if (parts[parts.length - 2] === \"images\") {\n            obj.pathname = `${parts[1]}/images/generations`;\n          } else {\n            throw new Error(\"Unexpected path\");\n          }\n          break;\n        case \"transcriptions\":\n          obj.pathname = `${parts[1]}/audio/transcriptions`;\n          break;\n        case \"translations\":\n          obj.pathname = `${parts[1]}/audio/translations`;\n          break;\n      }\n      obj.searchParams.delete(\"api-version\");\n      request.url = obj.toString();\n      return next(request);\n    },\n  };\n  return policy;\n}\n"]}